!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).VueGridMultiselect=t()}(this,function(){"use strict";function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,s)}return i}var r=function(e){return null==e||""===e},l=function(e){return e.map(function(e){return function(r){for(var e=1;e<arguments.length;e++){var l=null!=arguments[e]?arguments[e]:{};e%2?t(Object(l),!0).forEach(function(e){var t,i,s;t=r,s=l[i=e],i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(l)):t(Object(l)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(l,e))})}return r}({},e)})},n=function(e,t){var i=e.find(function(e){return r(e[t])}),s=!r(i);return s&&console.warn("Item ".concat(JSON.stringify(i)).concat(" doesn not contain grouping field: ".concat(t))),s},i=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return Array.isArray(e)?e[t]||e[0]:e};return function(e,t,i,s,r,l,n,a,c,o){"boolean"!=typeof n&&(c=a,a=n,n=!1);var u,m="function"==typeof i?i.options:i;if(e&&e.render&&(m.render=e.render,m.staticRenderFns=e.staticRenderFns,m._compiled=!0,r&&(m.functional=!0)),s&&(m._scopeId=s),l?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(l)},m._ssrRegister=u):t&&(u=n?function(){t.call(this,o(this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),u)if(m.functional){var d=m.render;m.render=function(e,t){return u.call(t),d(e,t)}}else{var _=m.beforeCreate;m.beforeCreate=_?[].concat(_,u):[u]}return i}({render:function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("div",{staticClass:"gridmultiselect",class:{"gridmultiselect--floatingmenu":a.isMenuFloating},attrs:{tabindex:a.searchable?-1:a.tabIndex},on:{blur:function(e){a.menuVisible=!1}}},[s("div",{staticClass:"gridmultiselect__header"},[s("span",{staticClass:"gridmultiselect__title"},[a._v(a._s(a.title))]),a._v(" "),s("transition",{attrs:{name:"gridmultiselect__slide"}},[s("button",{directives:[{name:"show",rawName:"v-show",value:!a.menuVisible,expression:"!menuVisible"}],staticClass:"gridmultiselect__burger",on:{click:a.showMenu}},[s("span",{staticClass:"gridmultiselect__burgerline"},[a._v(" ")]),a._v(" "),s("span",{staticClass:"gridmultiselect__burgerline"},[a._v(" ")]),a._v(" "),s("span",{staticClass:"gridmultiselect__burgerline"},[a._v(" ")])])])],1),a._v(" "),s("ul",{staticClass:"gridmultiselect__selecteditems"},[0===a.selectedItems.length?s("li",{staticClass:"gridmultiselect__selecteditem--empty"},[a._v(a._s(a.selectedItemsEmptyMessage))]):a._l(a.selectedItems,function(t,i){return s("li",{key:t[a.itemKey],staticClass:"gridmultiselect__selecteditem gridmultiselect__selecteditem--font-small",on:{click:function(e){return a.selectItem(t)}}},[s("div",{staticClass:"gridmultiselect__selecteditemtext",class:[{"gridmultiselect__selecteditemtext--cursor-pointer":a.isRowDetailEnabled},a.getRowDetailsIndicatorClass(t)],on:{click:function(e){a.isRowDetailEnabled&&a.toggleDetails(t)}}},[a._t("selected-item",[a._v("\n          "+a._s(a.getItemLabel(t,"selectedItemLabel"))+"\n          "),a.isGroupingEnabled?s("span",{staticClass:"gridmultiselect__selecteditemgroupbadge"},[a._v("("+a._s(t[a.groupBy])+")")]):a._e()],{selectedItem:t}),a._v(" "),s("transition",{attrs:{name:"gridmultiselect__slidedown"}},[a.isRowDetailEnabled?s("div",{directives:[{name:"show",rawName:"v-show",value:a.rowDetails.includes(t[a.itemKey]),expression:"rowDetails.includes(selectedItem[itemKey])"}],staticClass:"gridmultiselect__selecteditemdetails"},[a._t("selected-item-details",[a._v(a._s(a.getItemLabel(t,"itemDetails")))],{selectedItem:t})],2):a._e()])],2),a._v(" "),s("div",{staticClass:"gridmultiselect__removebutton gridmultiselect__removebutton--font-small",on:{click:function(e){return a.removeItem(i)}}},[a._v("x")])])}),a._v(" "),a.hasSlot("selected-items-footer")?s("li",{staticClass:"gridmultiselect__selecteditemitemsfooter"},[a._t("selected-items-footer")],2):a._e()],2),a._v(" "),s("transition",{attrs:{name:"gridmultiselect__slide"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:a.menuVisible,expression:"menuVisible"}],ref:"menu",staticClass:"gridmultiselect__items-wrap",class:{"gridmultiselect__items-floatingwrap":a.isMenuFloating},on:{mousedown:function(e){e.preventDefault()}}},[s("ul",{staticClass:"gridmultiselect__items",on:{mousedown:function(e){e.preventDefault()}}},[a.searchable?s("li",{staticClass:"gridmultiselect__searchfield-wrap"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.searchTerm,expression:"searchTerm"}],ref:"search",staticClass:"gridmultiselect__searchfield gridmultiselect__searchfield--font-small",attrs:{type:"text",placeholder:"Search...",tabindex:a.tabIndex},domProps:{value:a.searchTerm},on:{focus:function(e){return e.preventDefault(),a.showMenu(e)},blur:function(e){e.preventDefault(),a.menuVisible=!1},input:function(e){e.target.composing||(a.searchTerm=e.target.value)}}})]):a._e(),a._v(" "),0===a.internalItems.length?s("li",{staticClass:"gridmultiselect__item--empty"},[a._v(a._s(a.itemsEmptyMessage))]):a._l(a.internalItems,function(n){return s("li",{key:n[a.itemKey],staticClass:"gridmultiselect__item",class:{"gridmultiselect__item--selected":a.isSelected(n)}},[n.$isGroup?s("span",{staticClass:"gridmultiselect__itemgrouptext"},[a._v(a._s(n.$label))]):a._e(),a._v(" "),n.$isGroup||n.$isDisabled?a._e():s("span",{staticClass:"gridmultiselect__itemcb-wrap"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.selectedItems,expression:"selectedItems"}],staticClass:"gridmultiselect__itemcb",attrs:{type:"checkbox",id:"item-cb"+n[a.itemKey]+"_"+a.guid},domProps:{value:n,checked:Array.isArray(a.selectedItems)?-1<a._i(a.selectedItems,n):a.selectedItems},on:{change:function(e){var t=a.selectedItems,i=e.target,s=!!i.checked;if(Array.isArray(t)){var r=n,l=a._i(t,r);i.checked?l<0&&(a.selectedItems=t.concat([r])):-1<l&&(a.selectedItems=t.slice(0,l).concat(t.slice(l+1)))}else a.selectedItems=s}}})]),a._v(" "),n.$isGroup?a._e():s("span",{staticClass:"gridmultiselect__itemtext"},[a._t("item",[s("label",{staticClass:"gridmultiselect__itemlabel gridmultiselect__itemlabel--font-small",class:{"gridmultiselect__itemlabel--disabled":n.$isDisabled},attrs:{for:n.$isDisabled?null:"item-cb"+n[a.itemKey]+"_"+a.guid}},[a._v(a._s(a.getItemLabel(n)))])],{item:n})],2)])}),a._v(" "),a.hasSlot("items-footer")?s("li",{staticClass:"gridmultiselect__itemsfooter"},[a._t("items-footer")],2):a._e()],2)])])],1)},staticRenderFns:[]},void 0,{name:"vue-gridmultiselect",data:function(){return{guid:null,menuVisible:!1,searchTerm:null,rowDetails:[]}},mounted:function(){this.guid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},props:{title:{type:String,default:"Grid Multiselect"},itemLabel:{value:[String,Array],required:!0},itemKey:{type:String,required:!0},items:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}},searchable:{type:Boolean,default:!0},emptyMessage:{type:String,default:"No Data"},groupBy:{type:String},itemDetails:{type:String},menuPosition:{type:String,default:"dock"},tabIndex:{type:Number,default:0}},computed:{selectedItemLabel:function(){return Array.isArray(this.itemLabel)&&1<this.itemLabel.length?this.itemLabel[1]:i(this.itemLabel)},internalItems:function(){var t=this,e=r(this.groupBy)?l(this.items):function(e,i){if(n(e,i))return[];var t=l(e).reduce(function(e,t){return(e[t[i]]=e[t[i]]||[]).push(t),e},{}),s=Object.keys(t),r=[];return s.forEach(function(e){r.push({$label:e,$isGroup:!0}),r=r.concat(t[e])}),r}(this.items,this.groupBy);return r(this.searchTerm)?e:e.filter(function(e){return!!e.$isGroup||-1<t.getItemLabel(e).trim().toLowerCase().indexOf(t.searchTerm.trim().toLowerCase())})},selectedItems:{get:function(){return this.value||[]},set:function(e){this.$emit("input",e)}},isGroupingEnabled:function(){return!r(this.groupBy)},itemsEmptyMessage:function(){return i(this.emptyMessage.split("|"))},selectedItemsEmptyMessage:function(){return i(this.emptyMessage.split("|"),1)},isRowDetailEnabled:function(){return!r(this.itemDetails)},isMenuFloating:function(){return"float"===this.menuPosition}},methods:{showMenu:function(){if(!this.menuVisible){this.menuVisible=!0;var e=this.searchable?this.$refs.search:this.$el;this.$nextTick(function(){e.focus()})}},removeItem:function(e){var t=this.selectedItems.splice(e,1);this.$emit("item-removed",t)},getItemLabel:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"itemLabel";return i(this[e]).split("|").map(function(e){return t[e.trim()]}).join(" ").trim()},selectItem:function(e){this.menuVisible||this.$emit("item-selected",e)},isSelected:function(t){var i=this.itemKey;return this.selectedItems.some(function(e){return e[i]===t[i]})},hasSlot:function(e){return!!this.$slots[e]||!!this.$scopedSlots[e]},toggleDetails:function(e){if(this.rowDetails.includes(e[this.itemKey])){var t=this.rowDetails.indexOf(e[this.itemKey]);this.rowDetails.splice(t,1)}else this.rowDetails.push(e[this.itemKey])},getRowDetailsIndicatorClass:function(e){return this.isRowDetailEnabled?"gridmultiselect__selecteditemtext--".concat(this.rowDetails.includes(e[this.itemKey])?"expanded":"collapsed"):null}}},void 0,!1,void 0,!1,void 0,void 0,void 0)});
